<?xml version="1.0" encoding="UTF-8"?>
<included>
    <if condition='property("LOG_FILE_AS_JSON").contains("true")'>
        <then>
            <appender name="ROLLING_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
                <encoder class="ch.qos.logback.core.encoder.LayoutWrappingEncoder">
                    <layout class="ch.qos.logback.contrib.json.classic.JsonLayout">
                        <timestampFormat>yyyy-MM-dd'T'HH:mm:ss.SSSX</timestampFormat>
                        <timestampFormatTimezoneId>Etc/UTC</timestampFormatTimezoneId>
                        <appendLineSeparator>true</appendLineSeparator>
                        <jsonFormatter class="ch.qos.logback.contrib.jackson.JacksonJsonFormatter">
                            <prettyPrint>false</prettyPrint>
                        </jsonFormatter>
                    </layout>
                </encoder>
                <file>${LOG_FILE}</file>
                <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
                    <fileNamePattern>${LOG_FILE}_%d{yyyy-MM-dd-HH}.log</fileNamePattern>
                </rollingPolicy>
            </appender>
        </then>
        <else>
            <appender name="ROLLING_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
                <encoder>
                    <pattern>
                        %date{yyyy-MM-dd'T'HH:mm:ss.SSSZ, UTC} ${LOG_LEVEL_PATTERN:-%5p} ${PID:- } --- [%t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}
                    </pattern>
                </encoder>
                <file>${LOG_FILE}</file>
                <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
                    <fileNamePattern>${LOG_FILE}_%d{yyyy-MM-dd-HH}.log</fileNamePattern>
                </rollingPolicy>
            </appender>
        </else>
    </if>
</included>